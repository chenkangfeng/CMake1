#
# Usage:
#	Param_Parse(<PARAMS> [ARGN])
#
FUNCTION(PARAM_PARSE ${PARAM_PREFIX}_PARAMS)
	SET(${PARAM_PREFIX}_ARGS ${ARGN})
	FOREACH(PARAM ${${${PARAM_PREFIX}_PARAMS}})
		SET(PARAM_VALUE)
		SET(PARAM_VALUE_LIST)
		SET(PARAM_FOUND FALSE)
		SET(ONCE_PARAM_FOUND FALSE)
		SET(LIST_PARAM_FOUND FALSE)
		FOREACH(ARG ${ARGN})
			IF(${ARG} STREQUAL ${PARAM})
				SET(PARAM_FOUND TRUE)
				SET(ONCE_PARAM_FOUND TRUE)
				SET(LIST_PARAM_FOUND TRUE)
				LIST(REMOVE_ITEM ${PARAM_PREFIX}_ARGS ${ARG})
			ELSEIF(ONCE_PARAM_FOUND OR LIST_PARAM_FOUND)
				LIST(FIND ${${PARAM_PREFIX}_PARAMS} ${ARG} ARG_POSITION)
				IF(${ARG_POSITION} EQUAL -1)
					IF(ONCE_PARAM_FOUND)
						SET(PARAM_VALUE ${ARG})
						LIST(REMOVE_ITEM ${PARAM_PREFIX}_ARGS ${ARG})
					ENDIF()
					IF(LIST_PARAM_FOUND)
						LIST(APPEND PARAM_VALUE_LIST ${ARG})
					ENDIF()
				ELSE()
					SET(LIST_PARAM_FOUND FALSE)
				ENDIF()
				SET(ONCE_PARAM_FOUND FALSE)
			ENDIF()
		ENDFOREACH()
		SET(${PARAM} ${PARAM_VALUE} PARENT_SCOPE)
		SET(${PARAM}-LIST ${PARAM_VALUE_LIST} PARENT_SCOPE)
		SET(${PARAM}-FOUND ${PARAM_FOUND} PARENT_SCOPE)
	ENDFOREACH()
	SET(${${PARAM_PREFIX}_PARAMS}-ARGS ${${PARAM_PREFIX}_ARGS} PARENT_SCOPE)
ENDFUNCTION()
