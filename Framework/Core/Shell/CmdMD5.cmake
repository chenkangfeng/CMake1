#
# Usage:
#	Cmd_MD5(<SOURCE> <VALUE>)
#
FUNCTION(CMD_MD5 SOURCE VALUE)
	ABSOLUTE_PATH(SOURCE)
	SET(MD5_VALUE)
	IF(EXISTS ${SOURCE})
		IF(IS_DIRECTORY ${SOURCE})
			FILE(GLOB SUB_SOURCES ${SOURCE}/*)
			FOREACH(SUB_SOURCE ${SUB_SOURCES})
				CMD_MD5(${SUB_SOURCE} SUB_SOURCE_MD5)
				SET(MD5_VALUE ${MD5_VALUE}${SUB_SOURCE_MD5})
			ENDFOREACH()
			IF(MD5_VALUE)
				STRING(MD5 MD5_VALUE ${MD5_VALUE})
			ENDIF()
		ELSE()
			FILE(MD5 ${SOURCE} MD5_VALUE)
		ENDIF()
	ENDIF()
	SET(${VALUE} ${MD5_VALUE} PARENT_SCOPE)
ENDFUNCTION()
